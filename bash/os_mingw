##
# Bash configuration for mingw.
#
# vim:filetype=sh:

# Force the terminal type to "xterm" if using mingw vim, which is built
# without the terminfo support needed for "xterm-256color".
__garbage __vim
__vim=$(type -P vim)
if [ -x "$__vim" ]; then
  __garbage __vim_terminfo
  __vim_terminfo=`"$__vim" --version | grep +terminfo`
  if [ -z "$__vim_terminfo" ]; then
    export TERM=xterm
  fi
fi


# Find the git executable. If git.exe is already on the PATH, there's no need to do anything.
# If git.cmd is found, verify or create a simple forwarding script - msys doesn't automatically
# invoke cmd.exe for .cmd files.
__garbage __git
__git=$(type -P git.exe git.cmd | head -1)
if [ "${__git#*.}" == "cmd" ]; then
  __garbage __git_wrapper
  __git_wrapper="$HOME/bin/git"
  if [ ! -x "$__git_wrapper" ]; then
    cat << EOF > "$__git_wrapper"
#!/bin/sh
cmd //c "$(basename "${__git}")" \$*
EOF
    chmod +x "$__git_wrapper"
  fi
fi
